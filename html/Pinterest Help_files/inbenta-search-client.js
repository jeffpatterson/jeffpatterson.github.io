!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.InbentaSearchClient=t()}(this,function(){"use strict";var e=Object.prototype.hasOwnProperty,t=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),r=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},n={arrayToObject:r,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var u=a[s],c=i[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:i,prop:u}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var r="string"==typeof e?e:String(e),n="",o=0;o<r.length;++o){var i=r.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=r.charAt(o):i<128?n+=t[i]:i<2048?n+=t[192|i>>6]+t[128|63&i]:i<55296||i>=57344?n+=t[224|i>>12]+t[128|i>>6&63]+t[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&r.charCodeAt(o)),n+=t[240|i>>18]+t[128|i>>12&63]+t[128|i>>6&63]+t[128|63&i])}return n},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function t(n,o,i){if(!o)return n;if("object"!=typeof o){if(Array.isArray(n))n.push(o);else{if("object"!=typeof n)return[n,o];(i.plainObjects||i.allowPrototypes||!e.call(Object.prototype,o))&&(n[o]=!0)}return n}if("object"!=typeof n)return[n].concat(o);var a=n;return Array.isArray(n)&&!Array.isArray(o)&&(a=r(n,i)),Array.isArray(n)&&Array.isArray(o)?(o.forEach(function(r,o){e.call(n,o)?n[o]&&"object"==typeof n[o]?n[o]=t(n[o],r,i):n.push(r):n[o]=r}),n):Object.keys(o).reduce(function(r,n){var a=o[n];return e.call(r,n)?r[n]=t(r[n],a,i):r[n]=a,r},a)}},o=String.prototype.replace,i=/%20/g,a={default:"RFC3986",formatters:{RFC1738:function(e){return o.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},s={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},f=function e(t,r,o,i,a,s,u,f,l,p,h,d){var v=t;if("function"==typeof u)v=u(r,v);else if(v instanceof Date)v=p(v);else if(null===v){if(i)return s&&!d?s(r,c.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||n.isBuffer(v))return s?[h(d?r:s(r,c.encoder))+"="+h(s(v,c.encoder))]:[h(r)+"="+h(String(v))];var y,g=[];if(void 0===v)return g;if(Array.isArray(u))y=u;else{var m=Object.keys(v);y=f?m.sort(f):m}for(var b=0;b<y.length;++b){var _=y[b];a&&null===v[_]||(g=Array.isArray(v)?g.concat(e(v[_],o(r,_),o,i,a,s,u,f,l,p,h,d)):g.concat(e(v[_],r+(l?"."+_:"["+_+"]"),o,i,a,s,u,f,l,p,h,d)))}return g},l=(Object.prototype.hasOwnProperty,function(e,t){var r=e,o=t?n.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var i=void 0===o.delimiter?c.delimiter:o.delimiter,u="boolean"==typeof o.strictNullHandling?o.strictNullHandling:c.strictNullHandling,l="boolean"==typeof o.skipNulls?o.skipNulls:c.skipNulls,p="boolean"==typeof o.encode?o.encode:c.encode,h="function"==typeof o.encoder?o.encoder:c.encoder,d="function"==typeof o.sort?o.sort:null,v=void 0!==o.allowDots&&o.allowDots,y="function"==typeof o.serializeDate?o.serializeDate:c.serializeDate,g="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:c.encodeValuesOnly;if(void 0===o.format)o.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,o.format))throw new TypeError("Unknown format option provided.");var m,b,_=a.formatters[o.format];"function"==typeof o.filter?r=(b=o.filter)("",r):Array.isArray(o.filter)&&(m=b=o.filter);var w,j=[];if("object"!=typeof r||null===r)return"";w=o.arrayFormat in s?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var A=s[w];m||(m=Object.keys(r)),d&&m.sort(d);for(var T=0;T<m.length;++T){var k=m[T];l&&null===r[k]||(j=j.concat(f(r[k],k,A,u,l,p?h:null,b,d,v,y,_,g)))}var x=j.join(i),O=!0===o.addQueryPrefix?"?":"";return x.length>0?O+x:""}),p=function(e,t){return function(){for(var r=arguments,n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=r[o];return e.apply(t,n)}};function h(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var d=Object.prototype.toString;function v(e){return"[object Array]"===d.call(e)}function y(e){return null!==e&&"object"==typeof e}function g(e){return"[object Function]"===d.call(e)}function m(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),v(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var b={isArray:v,isArrayBuffer:function(e){return"[object ArrayBuffer]"===d.call(e)},isBuffer:function(e){return null!=e&&(h(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&h(e.slice(0,0))}(e)||!!e._isBuffer)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:y,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===d.call(e)},isFile:function(e){return"[object File]"===d.call(e)},isBlob:function(e){return"[object Blob]"===d.call(e)},isFunction:g,isStream:function(e){return y(e)&&g(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:m,merge:function e(){var t=arguments,r={};function n(t,n){"object"==typeof r[n]&&"object"==typeof t?r[n]=e(r[n],t):r[n]=t}for(var o=0,i=arguments.length;o<i;o++)m(t[o],n);return r},extend:function(e,t,r){return m(t,function(t,n){e[n]=r&&"function"==typeof t?p(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},_=function(e,t,r,n,o){return function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e}(new Error(e),t,r,n,o)};function w(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var j=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],A=b.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=b.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function k(){this.message="String contains an invalid character"}k.prototype=new Error,k.prototype.code=5,k.prototype.name="InvalidCharacterError";var x=function(e){for(var t,r,n=String(e),o="",i=0,a=T;n.charAt(0|i)||(a="=",i%1);o+=a.charAt(63&t>>8-i%1*8)){if((r=n.charCodeAt(i+=.75))>255)throw new k;t=t<<8|r}return o},O=b.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),b.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),b.isString(n)&&a.push("path="+n),b.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},S="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||x,$=function(e){return new Promise(function(t,r){var n=e.data,o=e.headers;b.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest,a="onreadystatechange",s=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in i||A(e.url)||(i=new window.XDomainRequest,a="onload",s=!0,i.onprogress=function(){},i.ontimeout=function(){}),e.auth){var u=e.auth.username||"",c=e.auth.password||"";o.Authorization="Basic "+S(u+":"+c)}if(i.open(e.method.toUpperCase(),function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(b.isURLSearchParams(t))n=t.toString();else{var o=[];b.forEach(t,function(e,t){null!==e&&void 0!==e&&(b.isArray(e)&&(t+="[]"),b.isArray(e)||(e=[e]),b.forEach(e,function(e){b.isDate(e)?e=e.toISOString():b.isObject(e)&&(e=JSON.stringify(e)),o.push(w(t)+"="+w(e))}))}),n=o.join("&")}return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}(e.url,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i[a]=function(){if(i&&(4===i.readyState||s)&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n,o,a,u,c,f="getAllResponseHeaders"in i?(n=i.getAllResponseHeaders(),c={},n?(b.forEach(n.split("\n"),function(e){if(u=e.indexOf(":"),o=b.trim(e.substr(0,u)).toLowerCase(),a=b.trim(e.substr(u+1)),o){if(c[o]&&j.indexOf(o)>=0)return;c[o]="set-cookie"===o?(c[o]?c[o]:[]).concat([a]):c[o]?c[o]+", "+a:a}}),c):c):null,l={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:1223===i.status?204:i.status,statusText:1223===i.status?"No Content":i.statusText,headers:f,config:e,request:i};!function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(_("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}(t,r,l),i=null}},i.onerror=function(){r(_("Network Error",e,null,i)),i=null},i.ontimeout=function(){r(_("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",i)),i=null},b.isStandardBrowserEnv()){var f=O,l=(e.withCredentials||A(e.url))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;l&&(o[e.xsrfHeaderName]=l)}if("setRequestHeader"in i&&b.forEach(o,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)}),e.withCredentials&&(i.withCredentials=!0),e.responseType)try{i.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){i&&(i.abort(),r(e),i=null)}),void 0===n&&(n=null),i.send(n)})},R={"Content-Type":"application/x-www-form-urlencoded"};function E(e,t){!b.isUndefined(e)&&b.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var L,C={adapter:("undefined"!=typeof XMLHttpRequest?L=$:"undefined"!=typeof process&&(L=$),L),transformRequest:[function(e,t){return function(e,t){b.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}(t,"Content-Type"),b.isFormData(e)||b.isArrayBuffer(e)||b.isBuffer(e)||b.isStream(e)||b.isFile(e)||b.isBlob(e)?e:b.isArrayBufferView(e)?e.buffer:b.isURLSearchParams(e)?(E(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):b.isObject(e)?(E(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};C.headers={common:{Accept:"application/json, text/plain, */*"}},b.forEach(["delete","get","head"],function(e){C.headers[e]={}}),b.forEach(["post","put","patch"],function(e){C.headers[e]=b.merge(R)});var U=C;function P(){this.handlers=[]}P.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},P.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},P.prototype.forEach=function(e){b.forEach(this.handlers,function(t){null!==t&&e(t)})};var z=P,D=function(e,t,r){return b.forEach(r,function(r){e=r(e,t)}),e},B=function(e){return!(!e||!e.__CANCEL__)};function N(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var F=function(e){var t,r,n;return N(e),e.baseURL&&(n=e.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n))&&(e.url=(t=e.baseURL,(r=e.url)?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=D(e.data,e.headers,e.transformRequest),e.headers=b.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),b.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||U.adapter)(e).then(function(t){return N(e),t.data=D(t.data,t.headers,e.transformResponse),t},function(t){return B(t)||(N(e),t&&t.response&&(t.response.data=D(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})};function I(e){this.defaults=e,this.interceptors={request:new z,response:new z}}I.prototype.request=function(e){"string"==typeof e&&(e=b.merge({url:arguments[0]},arguments[1])),(e=b.merge(U,this.defaults,{method:"get"},e)).method=e.method.toLowerCase();var t=[F,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},b.forEach(["delete","get","head","options"],function(e){I.prototype[e]=function(t,r){return this.request(b.merge(r||{},{method:e,url:t}))}}),b.forEach(["post","put","patch"],function(e){I.prototype[e]=function(t,r,n){return this.request(b.merge(n||{},{method:e,url:t,data:r}))}});var q=I;function K(e){this.message=e}K.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},K.prototype.__CANCEL__=!0;var M=K;function V(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new M(e),t(r.reason))})}V.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},V.source=function(){var e;return{token:new V(function(t){e=t}),cancel:e}};var H=V;function W(e){var t=new q(e),r=p(q.prototype.request,t);return b.extend(r,q.prototype,t),b.extend(r,t),r}var J=W(U);J.Axios=q,J.create=function(e){return W(b.merge(U,e))},J.Cancel=M,J.CancelToken=H,J.isCancel=B,J.all=function(e){return Promise.all(e)},J.spread=function(e){return function(t){return e.apply(null,t)}};var X=J,G=J;X.default=G;var Q=X,Y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Z(e,t){return e(t={exports:{}},t.exports),t.exports}var ee="object"==typeof Y&&Y&&Y.Object===Object&&Y,te="object"==typeof self&&self&&self.Object===Object&&self,re=ee||te||Function("return this")(),ne=function(){return re.Date.now()};function oe(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var ie=oe;function ae(e){return"function"==typeof e}function se(e){return"object"==typeof e&&null!==e}function ue(e){return void 0===e}oe.EventEmitter=oe,oe.prototype._events=void 0,oe.prototype._maxListeners=void 0,oe.defaultMaxListeners=10,oe.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},oe.prototype.emit=function(e){var t,r,n,o,i,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||se(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(ue(r=this._events[e]))return!1;if(ae(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(se(r))for(o=Array.prototype.slice.call(arguments,1),n=(a=r.slice()).length,i=0;i<n;i++)a[i].apply(this,o);return!0},oe.prototype.addListener=function(e,t){var r;if(!ae(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,ae(t.listener)?t.listener:t),this._events[e]?se(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,se(this._events[e])&&!this._events[e].warned&&(r=ue(this._maxListeners)?oe.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},oe.prototype.on=oe.prototype.addListener,oe.prototype.once=function(e,t){if(!ae(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},oe.prototype.removeListener=function(e,t){var r,n,o,i;if(!ae(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,n=-1,r===t||ae(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(se(r)){for(i=o;i-- >0;)if(r[i]===t||r[i].listener&&r[i].listener===t){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},oe.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(ae(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},oe.prototype.listeners=function(e){return this._events&&this._events[e]?ae(this._events[e])?[this._events[e]]:this._events[e].slice():[]},oe.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(ae(t))return 1;if(t)return t.length}return 0},oe.listenerCount=function(e,t){return e.listenerCount(t)};var ce=re.Symbol;var fe=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},le=Array.isArray,pe=Object.prototype,he=pe.hasOwnProperty,de=pe.toString,ve=ce?ce.toStringTag:void 0;var ye=function(e){var t=he.call(e,ve),r=e[ve];try{e[ve]=void 0;var n=!0}catch(e){}var o=de.call(e);return n&&(t?e[ve]=r:delete e[ve]),o},ge=Object.prototype.toString;var me=function(e){return ge.call(e)},be="[object Null]",_e="[object Undefined]",we=ce?ce.toStringTag:void 0;var je=function(e){return null==e?void 0===e?_e:be:we&&we in Object(e)?ye(e):me(e)};var Ae=function(e){return null!=e&&"object"==typeof e},Te="[object Symbol]";var ke=function(e){return"symbol"==typeof e||Ae(e)&&je(e)==Te},xe=1/0,Oe=ce?ce.prototype:void 0,Se=Oe?Oe.toString:void 0;var $e=function e(t){if("string"==typeof t)return t;if(le(t))return fe(t,e)+"";if(ke(t))return Se?Se.call(t):"";var r=t+"";return"0"==r&&1/t==-xe?"-0":r};var Re=function(e){return null==e?"":$e(e)},Ee=/^\s+/,Le=re.parseInt;var Ce=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Le(Re(e).replace(Ee,""),t||0)};var Ue=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Pe="[object AsyncFunction]",ze="[object Function]",De="[object GeneratorFunction]",Be="[object Proxy]";var Ne,Fe=function(e){if(!Ue(e))return!1;var t=je(e);return t==ze||t==De||t==Pe||t==Be},Ie=re["__core-js_shared__"],qe=(Ne=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+Ne:"";var Ke=function(e){return!!qe&&qe in e},Me=Function.prototype.toString;var Ve=function(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""},He=/^\[object .+?Constructor\]$/,We=Function.prototype,Je=Object.prototype,Xe=We.toString,Ge=Je.hasOwnProperty,Qe=RegExp("^"+Xe.call(Ge).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ye=function(e){return!(!Ue(e)||Ke(e))&&(Fe(e)?Qe:He).test(Ve(e))};var Ze=function(e,t){return null==e?void 0:e[t]};var et=function(e,t){var r=Ze(e,t);return Ye(r)?r:void 0},tt=function(){try{var e=et(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var rt=function(e,t,r){"__proto__"==t&&tt?tt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var nt=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===r(i[u],u,i))break}return t}}();var ot=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},it="[object Arguments]";var at=function(e){return Ae(e)&&je(e)==it},st=Object.prototype,ut=st.hasOwnProperty,ct=st.propertyIsEnumerable,ft=at(function(){return arguments}())?at:function(e){return Ae(e)&&ut.call(e,"callee")&&!ct.call(e,"callee")};var lt=function(){return!1},pt=Z(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?re.Buffer:void 0,i=(o?o.isBuffer:void 0)||lt;e.exports=i}),ht=9007199254740991,dt=/^(?:0|[1-9]\d*)$/;var vt=function(e,t){var r=typeof e;return!!(t=null==t?ht:t)&&("number"==r||"symbol"!=r&&dt.test(e))&&e>-1&&e%1==0&&e<t},yt=9007199254740991;var gt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=yt},mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var bt=function(e){return Ae(e)&&gt(e.length)&&!!mt[je(e)]};var _t=function(e){return function(t){return e(t)}},wt=Z(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&ee.process,i=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),jt=wt&&wt.isTypedArray,At=jt?_t(jt):bt,Tt=Object.prototype.hasOwnProperty;var kt=function(e,t){var r=le(e),n=!r&&ft(e),o=!r&&!n&&pt(e),i=!r&&!n&&!o&&At(e),a=r||n||o||i,s=a?ot(e.length,String):[],u=s.length;for(var c in e)!t&&!Tt.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vt(c,u))||s.push(c);return s},xt=Object.prototype;var Ot=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xt)};var St=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),$t=Object.prototype.hasOwnProperty;var Rt=function(e){if(!Ot(e))return St(e);var t=[];for(var r in Object(e))$t.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Et=function(e){return null!=e&&gt(e.length)&&!Fe(e)};var Lt=function(e){return Et(e)?kt(e):Rt(e)};var Ct=function(e,t){return e&&nt(e,t,Lt)};var Ut=function(){this.__data__=[],this.size=0};var Pt=function(e,t){return e===t||e!=e&&t!=t};var zt=function(e,t){for(var r=e.length;r--;)if(Pt(e[r][0],t))return r;return-1},Dt=Array.prototype.splice;var Bt=function(e){var t=this.__data__,r=zt(t,e);return!(r<0||(r==t.length-1?t.pop():Dt.call(t,r,1),--this.size,0))};var Nt=function(e){var t=this.__data__,r=zt(t,e);return r<0?void 0:t[r][1]};var Ft=function(e){return zt(this.__data__,e)>-1};var It=function(e,t){var r=this.__data__,n=zt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qt.prototype.clear=Ut,qt.prototype.delete=Bt,qt.prototype.get=Nt,qt.prototype.has=Ft,qt.prototype.set=It;var Kt=qt;var Mt=function(){this.__data__=new Kt,this.size=0};var Vt=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Ht=function(e){return this.__data__.get(e)};var Wt=function(e){return this.__data__.has(e)},Jt=et(re,"Map"),Xt=et(Object,"create");var Gt=function(){this.__data__=Xt?Xt(null):{},this.size=0};var Qt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yt="__lodash_hash_undefined__",Zt=Object.prototype.hasOwnProperty;var er=function(e){var t=this.__data__;if(Xt){var r=t[e];return r===Yt?void 0:r}return Zt.call(t,e)?t[e]:void 0},tr=Object.prototype.hasOwnProperty;var rr=function(e){var t=this.__data__;return Xt?void 0!==t[e]:tr.call(t,e)},nr="__lodash_hash_undefined__";var or=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Xt&&void 0===t?nr:t,this};function ir(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ir.prototype.clear=Gt,ir.prototype.delete=Qt,ir.prototype.get=er,ir.prototype.has=rr,ir.prototype.set=or;var ar=ir;var sr=function(){this.size=0,this.__data__={hash:new ar,map:new(Jt||Kt),string:new ar}};var ur=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var cr=function(e,t){var r=e.__data__;return ur(t)?r["string"==typeof t?"string":"hash"]:r.map};var fr=function(e){var t=cr(this,e).delete(e);return this.size-=t?1:0,t};var lr=function(e){return cr(this,e).get(e)};var pr=function(e){return cr(this,e).has(e)};var hr=function(e,t){var r=cr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function dr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dr.prototype.clear=sr,dr.prototype.delete=fr,dr.prototype.get=lr,dr.prototype.has=pr,dr.prototype.set=hr;var vr=dr,yr=200;var gr=function(e,t){var r=this.__data__;if(r instanceof Kt){var n=r.__data__;if(!Jt||n.length<yr-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new vr(n)}return r.set(e,t),this.size=r.size,this};function mr(e){var t=this.__data__=new Kt(e);this.size=t.size}mr.prototype.clear=Mt,mr.prototype.delete=Vt,mr.prototype.get=Ht,mr.prototype.has=Wt,mr.prototype.set=gr;var br=mr,_r="__lodash_hash_undefined__";var wr=function(e){return this.__data__.set(e,_r),this};var jr=function(e){return this.__data__.has(e)};function Ar(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new vr;++t<r;)this.add(e[t])}Ar.prototype.add=Ar.prototype.push=wr,Ar.prototype.has=jr;var Tr=Ar;var kr=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var xr=function(e,t){return e.has(t)},Or=1,Sr=2;var $r=function(e,t,r,n,o,i){var a=r&Or,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var f=-1,l=!0,p=r&Sr?new Tr:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var h=e[f],d=t[f];if(n)var v=a?n(d,h,f,t,e,i):n(h,d,f,e,t,i);if(void 0!==v){if(v)continue;l=!1;break}if(p){if(!kr(t,function(e,t){if(!xr(p,t)&&(h===e||o(h,e,r,n,i)))return p.push(t)})){l=!1;break}}else if(h!==d&&!o(h,d,r,n,i)){l=!1;break}}return i.delete(e),i.delete(t),l},Rr=re.Uint8Array;var Er=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r};var Lr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},Cr=1,Ur=2,Pr="[object Boolean]",zr="[object Date]",Dr="[object Error]",Br="[object Map]",Nr="[object Number]",Fr="[object RegExp]",Ir="[object Set]",qr="[object String]",Kr="[object Symbol]",Mr="[object ArrayBuffer]",Vr="[object DataView]",Hr=ce?ce.prototype:void 0,Wr=Hr?Hr.valueOf:void 0;var Jr=function(e,t,r,n,o,i,a){switch(r){case Vr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mr:return!(e.byteLength!=t.byteLength||!i(new Rr(e),new Rr(t)));case Pr:case zr:case Nr:return Pt(+e,+t);case Dr:return e.name==t.name&&e.message==t.message;case Fr:case qr:return e==t+"";case Br:var s=Er;case Ir:var u=n&Cr;if(s||(s=Lr),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;n|=Ur,a.set(e,t);var f=$r(s(e),s(t),n,o,i,a);return a.delete(e),f;case Kr:if(Wr)return Wr.call(e)==Wr.call(t)}return!1};var Xr=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e};var Gr=function(e,t,r){var n=t(e);return le(e)?n:Xr(n,r(e))};var Qr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i};var Yr=function(){return[]},Zr=Object.prototype.propertyIsEnumerable,en=Object.getOwnPropertySymbols,tn=en?function(e){return null==e?[]:(e=Object(e),Qr(en(e),function(t){return Zr.call(e,t)}))}:Yr;var rn=function(e){return Gr(e,Lt,tn)},nn=1,on=Object.prototype.hasOwnProperty;var an=function(e,t,r,n,o,i){var a=r&nn,s=rn(e),u=s.length;if(u!=rn(t).length&&!a)return!1;for(var c=u;c--;){var f=s[c];if(!(a?f in t:on.call(t,f)))return!1}var l=i.get(e);if(l&&i.get(t))return l==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++c<u;){var d=e[f=s[c]],v=t[f];if(n)var y=a?n(v,d,f,t,e,i):n(d,v,f,e,t,i);if(!(void 0===y?d===v||o(d,v,r,n,i):y)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var g=e.constructor,m=t.constructor;g!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(p=!1)}return i.delete(e),i.delete(t),p},sn=et(re,"DataView"),un=et(re,"Promise"),cn=et(re,"Set"),fn=et(re,"WeakMap"),ln=Ve(sn),pn=Ve(Jt),hn=Ve(un),dn=Ve(cn),vn=Ve(fn),yn=je;(sn&&"[object DataView]"!=yn(new sn(new ArrayBuffer(1)))||Jt&&"[object Map]"!=yn(new Jt)||un&&"[object Promise]"!=yn(un.resolve())||cn&&"[object Set]"!=yn(new cn)||fn&&"[object WeakMap]"!=yn(new fn))&&(yn=function(e){var t=je(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ve(r):"";if(n)switch(n){case ln:return"[object DataView]";case pn:return"[object Map]";case hn:return"[object Promise]";case dn:return"[object Set]";case vn:return"[object WeakMap]"}return t});var gn=yn,mn=1,bn="[object Arguments]",_n="[object Array]",wn="[object Object]",jn=Object.prototype.hasOwnProperty;var An=function(e,t,r,n,o,i){var a=le(e),s=le(t),u=a?_n:gn(e),c=s?_n:gn(t),f=(u=u==bn?wn:u)==wn,l=(c=c==bn?wn:c)==wn,p=u==c;if(p&&pt(e)){if(!pt(t))return!1;a=!0,f=!1}if(p&&!f)return i||(i=new br),a||At(e)?$r(e,t,r,n,o,i):Jr(e,t,u,r,n,o,i);if(!(r&mn)){var h=f&&jn.call(e,"__wrapped__"),d=l&&jn.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,y=d?t.value():t;return i||(i=new br),o(v,y,r,n,i)}}return!!p&&(i||(i=new br),an(e,t,r,n,o,i))};var Tn=function e(t,r,n,o,i){return t===r||(null==t||null==r||!Ae(t)&&!Ae(r)?t!=t&&r!=r:An(t,r,n,o,e,i))},kn=1,xn=2;var On=function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var u=(s=r[o])[0],c=e[u],f=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var l=new br;if(n)var p=n(c,f,u,e,t,l);if(!(void 0===p?Tn(f,c,kn|xn,n,l):p))return!1}}return!0};var Sn=function(e){return e==e&&!Ue(e)};var $n=function(e){for(var t=Lt(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Sn(o)]}return t};var Rn=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}};var En=function(e){var t=$n(e);return 1==t.length&&t[0][2]?Rn(t[0][0],t[0][1]):function(r){return r===e||On(r,e,t)}},Ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cn=/^\w*$/;var Un=function(e,t){if(le(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ke(e))||Cn.test(e)||!Ln.test(e)||null!=t&&e in Object(t)},Pn="Expected a function";function zn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Pn);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(zn.Cache||vr),r}zn.Cache=vr;var Dn=zn,Bn=500;var Nn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fn=/\\(\\)?/g,In=function(e){var t=Dn(e,function(e){return r.size===Bn&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Nn,function(e,r,n,o){t.push(n?o.replace(Fn,"$1"):r||e)}),t});var qn=function(e,t){return le(e)?e:Un(e,t)?[e]:In(Re(e))},Kn=1/0;var Mn=function(e){if("string"==typeof e||ke(e))return e;var t=e+"";return"0"==t&&1/e==-Kn?"-0":t};var Vn=function(e,t){for(var r=0,n=(t=qn(t,e)).length;null!=e&&r<n;)e=e[Mn(t[r++])];return r&&r==n?e:void 0};var Hn=function(e,t,r){var n=null==e?void 0:Vn(e,t);return void 0===n?r:n};var Wn=function(e,t){return null!=e&&t in Object(e)};var Jn=function(e,t,r){for(var n=-1,o=(t=qn(t,e)).length,i=!1;++n<o;){var a=Mn(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&gt(o)&&vt(a,o)&&(le(e)||ft(e))};var Xn=function(e,t){return null!=e&&Jn(e,t,Wn)},Gn=1,Qn=2;var Yn=function(e,t){return Un(e)&&Sn(t)?Rn(Mn(e),t):function(r){var n=Hn(r,e);return void 0===n&&n===t?Xn(r,e):Tn(t,n,Gn|Qn)}};var Zn=function(e){return e};var eo=function(e){return function(t){return null==t?void 0:t[e]}};var to=function(e){return function(t){return Vn(t,e)}};var ro=function(e){return Un(e)?eo(Mn(e)):to(e)};var no=function(e){return"function"==typeof e?e:null==e?Zn:"object"==typeof e?le(e)?Yn(e[0],e[1]):En(e):ro(e)};var oo=function(e,t){var r={};return t=no(t,3),Ct(e,function(e,n,o){rt(r,n,t(e,n,o))}),r};function io(e){var t=e.prefix,r=e.cacheDuration,n=function(e){return t+"."+e},o={};return{get:function(e,t){if(localStorage.getItem(n(e))){var i=JSON.parse(localStorage.getItem(n(e)));if(Date.now()<new Date(i.expiresAt))return Promise.resolve(i.value)}return o[e]||(o[e]=t().then(function(t){return localStorage.setItem(n(e),JSON.stringify({expiresAt:Date.now()+r,value:t})),delete o[e],t}).catch(function(t){throw delete o[e],t})),o[e]},clear:function(){o={},localStorage.clear()}}}var ao=io({prefix:"inbenta_search.v1.autocompleter",cacheDuration:9e5}).get,so=function(){};so.prototype.remember=function(e,t,r){return this.has(e)?JSON.parse(localStorage.getItem(e)).value:this.set(e,t,r())},so.prototype.has=function(e){var t=localStorage.getItem(e);return!!t&&!(new Date(JSON.parse(t).expiresAt)<Date.now())},so.prototype.get=function(e,t){return void 0===t&&(t=function(){return null}),this.has(e)?JSON.parse(localStorage.getItem(e)).value:t()},so.prototype.set=function(e,t,r){return localStorage.setItem(e,JSON.stringify({value:r,expiresAt:Date.now()+t})),r},so.prototype.clear=function(){localStorage.clear()};var uo=new so,co=io({prefix:"inbenta_search.v1.apis.0",cacheDuration:864e5}),fo=co.get,lo=co.clear,po=function(e){return oo(e,function(e){return!0===e?"1":!1===e?"0":Ae(e)?po(e):e})},ho=function(e,t,r){var n=this;void 0===t&&(t={});var o=t.userType,i=t.environment,a=t.apiURL;void 0===a&&(a=null);var s=t.expirationTime;void 0===s&&(s=null);var u=t.autoRefresh;void 0===u&&(u=!0),void 0===r&&(r={});var c=r.domainKey,f=r.accessToken;this.$emitter=new ie,this.$data={authorization:{accessToken:f,expiresAt:s,domainKey:c},config:{apiKey:e,userType:o,environment:i,apiURL:a,autoRefresh:u},sessionToken:"",authError:null,agents:["Inbentaclient for Javascript v0.0.0"],refreshTimeout:null},this.callbackWhenInvalidAccessToken=function(){},this.$axios=Q.create({transformRequest:[function(e){return"string"==typeof e?e:po(e)},function(e){return"string"==typeof e?e:l(e)}]}),null!==this.$data.config.apiURL&&this.setBaseURL(this.$data.config.apiURL+"/v1"),this.$axios.interceptors.request.use(function(e){return e.headers={"Content-Type":"application/x-www-form-urlencoded","x-inbenta-user-type":n.$data.config.userType||0,"x-inbenta-env":n.$data.config.environment||"","x-inbenta-key":n.$data.config.apiKey},e.headers["x-inbenta-session"]=n.$data.sessionToken,n.accessToken&&(e.headers.Authorization="Bearer "+n.accessToken),e}),this.$authRetries=0,this.$axios.interceptors.response.use(function(e){return e},function(e){return n.retryAuth(e)}),null===this.expiresAt&&this.$data.config.autoRefresh&&!this.$data.authorization.domainKey&&this.refreshAccessToken()},vo={accessToken:{configurable:!0},expiresAt:{configurable:!0},sessionToken:{configurable:!0},getExpiresAt:{configurable:!0},userType:{configurable:!0}};return ho.prototype.retryAuth=function(e){var t,r=this;if(e.response&&(401===e.response.status||403===e.response.status)){if(this.$authRetries>=2)return Promise.reject(e);this.$data.authorization.accessToken=null;var n=this.$data.authorization.domainKey?this.refreshApiUrl():this.callbackWhenInvalidAccessToken();if((t=n)&&Fe(t.then)&&Fe(t.catch))return n.then(function(){return r.$axios.request(e.config)}).then(function(e){return r.$authRetries=0,e}).catch(function(){return r.$authRetries+=1,r.retryAuth(e)})}return Promise.reject(e)},ho.prototype.initAxiosAuth=function(){var e=this,t=Q.create({baseURL:"https://api.inbenta.io/v1"});return t.interceptors.request.use(function(t){var r={Authorization:"Bearer "+e.$data.authorization.accessToken,"x-inbenta-key":e.$data.config.apiKey};return t.headers=r,t}),t},ho.prototype.setCallbackWhenInvalidAccessToken=function(e){this.callbackWhenInvalidAccessToken=e},vo.accessToken.get=function(){return this.$data.authorization.accessToken},vo.expiresAt.get=function(){return this.$data.authorization.expiresAt},vo.sessionToken.get=function(){return this.$data.sessionToken},vo.getExpiresAt.get=function(){return this.expiresAt},ho.prototype.getAccessToken=function(){return this.accessToken},ho.prototype.getAccessTokenCacheKey=function(){return["inbenta_search.v1.auth",this.$data.authorization.domainKey||this.$data.config.apiKey,this.$data.config.environment||"development",this.$data.config.userType||0].join(".")},ho.prototype.setAccessToken=function(e,t){var r=this;this.$data.authorization.accessToken=e,this.$data.authorization.expiresAt=t,this.isReady()&&this.$emitter.emit("ready");var n=t-Ce(ne()/1e3);if(uo.set(this.getAccessTokenCacheKey(),1e3*n,{accessToken:e,expiresAt:t}),this.$data.config.autoRefresh&&!this.$data.authorization.domainKey){clearTimeout(this.$data.refreshTimeout);var o=n-60;this.$data.refreshTimeout=setTimeout(function(){r.refreshAccessToken()},1e3*o)}},vo.userType.get=function(){return this.$data.config.userType},vo.userType.set=function(e){this.$data.config.userType=e},ho.prototype.hasError=function(){return null!=this.$data.authError},ho.prototype.isReady=function(){return!this.hasError()&&null!=this.accessToken&&null!=this.$axios.defaults.baseURL},ho.prototype.untilReady=function(){return Promise.resolve(this)},ho.prototype.waitUntilReady=function(){var e=this;return this.isReady()?Promise.resolve(this):new Promise(function(t,r){e.$emitter.once("ready",function(){return t(e)}),e.$emitter.once("error",r)})},ho.prototype.refreshAccessToken=function(){var e=this;if(this.refreshingPromise)return this.refreshingPromise;var t=this.$data.authorization.domainKey?this.getAccessTokenWithDomainKey():this.getAccessTokenWithAccessToken();return this.refreshingPromise=t.then(function(t){var r=t.accessToken,n=t.expiresAt;e.setAccessToken(r,n),e.refreshingPromise=null}).catch(function(t){throw e.refreshingPromise=null,t}),this.refreshingPromise},ho.prototype.search=function(e,t){var r=this;return void 0===t&&(t={}),this.refreshApiUrl().then(function(){var n=Object.assign(t,{query:e});return r.$axios.post("federated-search",n).then(function(e){return e.data.results})})},ho.prototype.searches=function(e,t){var r=this;return void 0===t&&(t={}),this.refreshApiUrl().then(function(){return r.$axios.post("federated-searches",{requests:e},t).then(function(e){return e.data.results})})},ho.prototype.autocompleterData=function(e){var t=this;void 0===e&&(e="");var r=[this.$data.config.apiKey,this.$data.config.environment||"development",this.$data.config.userType||0,e].join(".");return ao(r,function(){return(e?Q.get(e):t.refreshApiUrl().then(function(){return t.$axios.get("autocompleter/data")})).then(function(e){return e.data})})},ho.prototype.autocompleterTrie=function(){var e=this;return this.refreshApiUrl().then(function(){return e.$axios.get("autocompleter/trie").then(function(e){return e.data})})},ho.prototype.autocompleterSettings=function(){var e=this;return this.refreshApiUrl().then(function(){return e.$axios.get("autocompleter/settings").then(function(e){return e.data})})},ho.prototype.generateSession=function(){var e=this;return this.refreshApiUrl().then(function(){return e.$axios.post("tracking/session").then(function(e){return e.data})})},ho.prototype.hasSession=function(){return this.$data.sessionToken&&""!=this.$data.sessionToken},ho.prototype.setSession=function(e){this.$data.sessionToken=e,this.hasSession()&&this.$emitter.emit("session")},ho.prototype.untilSession=function(){var e=this;return this.hasSession()?Promise.resolve():new Promise(function(t){e.$emitter.once("session",t)})},ho.prototype.setUserInfo=function(e){var t=this;return this.refreshApiUrl().then(function(){return t.untilSession()}).then(function(){return t.$axios.post("tracking/session/user",{data:e})})},ho.prototype.trackEvent=function(e,t){var r=this;return void 0===t&&(t={}),this.refreshApiUrl().then(function(){return r.untilSession()}).then(function(){return r.$axios.post("tracking/events",{type:e,data:t})})},ho.prototype.getAccessTokenWithAccessToken=function(){return this.initAxiosAuth().post("refreshToken",{},{headers:{"x-inbenta-key":this.$data.config.apiKey,Authorization:"Bearer "+this.accessToken}}).then(function(e){return{accessToken:e.data.accessToken,expiresAt:e.data.expiration}})},ho.prototype.getAccessTokenWithDomainKey=function(){var e=this;return this.initAxiosAuth().post("auth",{domain_key:this.$data.authorization.domainKey}).then(function(t){var r;return null!==e.$data.config.apiURL?r=e.$data.config.apiURL:(r=t.data.apis.search,e.setBaseURL(r+"/v1")),fo(e.$data.config.apiKey,function(){return Promise.resolve(r)}),{accessToken:t.data.accessToken,expiresAt:t.data.expiration}})},ho.prototype.refreshApiUrl=function(){var e=this;return null!==this.$data.config.apiURL?Promise.resolve():this.ensureAccessToken().then(function(){return fo(e.$data.config.apiKey,function(){return e.initAxiosAuth().get("apis").then(function(e){return e.data.apis.search})})}).then(function(t){var r=t+"/v1";e.setBaseURL(r)}).catch(function(t){return e.setError(t),lo(),Promise.reject(t)})},ho.prototype.setBaseURL=function(e){this.$axios.defaults.baseURL=e,this.isReady()&&this.$emitter.emit("ready")},ho.prototype.setError=function(e){this.$data.authError=e,e&&this.$emitter.emit("error",e)},ho.prototype.isAccessTokenExpired=function(){return this.expiresAt&&1e3*(this.expiresAt-5)<=Date.now()},ho.prototype.ensureAccessToken=function(){return!this.$data.config.autoRefresh||this.accessToken&&!this.isAccessTokenExpired()?Promise.resolve():this.refreshAccessToken()},ho.prototype.loadAccessTokenFromCache=function(){var e=uo.get(this.getAccessTokenCacheKey());e&&this.setAccessToken(e.accessToken,e.expiresAt)},ho.createFromDomainKey=function(e,t,r){var n=new ho(t,r,{domainKey:e});return n.loadAccessTokenFromCache(),n},ho.createFromAccessToken=function(e,t,r){return new ho(t,r,{accessToken:e})},Object.defineProperties(ho.prototype,vo),ho});
